---	
title: Какое исключение бросать в swith, если никакого подходящего case не нашлось?
tags: cleancode
published: false	
---	

## В чём проблема

```
enum SomeEnum
{
  One,
  Two
}

void someFunc()
{
  SomeEnum value = someOtherFunc();
  switch(value)
  {
     case One:
       //Обрабатываем
       break;
     case Two:
      //Обрабатываем
       ... break;
     default:
         //Что делать?
  }
}
```

Проблема в том, что совсем не очевидно, какое исключение правильно бросать в случае, если подходящего case не нашлось.

## А нужно ли вообще бросать исключение

Во-первых, нужно заметить, что не всегда нужно бросать исключение если подходящего case не нашлось - может быть ваш switch изначально предусматривает только обработку ограниченного скопа значений.

Во-вторых, если то что подходящего case не нашлось - это предусмотренная вами ошибка, в том плане, что эта ошибка просто часть потока выполнения программы, часть какого-то алгоритма работы, то best practice - это не использовать исключения для управления потоком выполнения программы (читайте [Are exceptions as control flow considered a serious antipattern? If so, Why?](https://softwareengineering.stackexchange.com/q/189222/236856)), перепишите метод так, чтобы возвращать ошибку как результата выполнения метода, например.

В этом тексте я рассматриваю вопрос какое исключение нужно бросать только в контексте ситуации, когда switch должен содержать обработку всего возможного диапазона значений, но по какой-то причине не содержит (добавили новое значение enum'а или добавили новый тип и т.п., а switch не изменили) - в большинстве случаев это будет исключительной ситуацией, в которой лучше всего как можно скорее упасть (почему лучше как можно скорее упасть читайте в статье [Fail Fast](https://www.martinfowler.com/ieeeSoftware/failFast.pdf)) и сообщить пользователю или вызывающему модулю о возникновении непредвиденной ошибки выбросив исключение.

Также не могу не упомянуть, что тема обработки какого-то диапазона значений в switch'е связана с принципом единственного выбора
