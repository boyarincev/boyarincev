---	
title: Инкапсуляция - это не про сокрытие деталей реализации
tags: oop
published: false	
---	

Вроде живёшь себе спокойно, думаешь, что понимаешь кое-что в программировании, но вдруг во время дружеской беседы в зуме с друзьями программистами говоришь:

> Инкапсуляция? - Ну это сокрытие деталей реализации.

А тебе в ответ:

> Вообще-то инкапсуляция - это объединение данных и методов оперирующих этими данными вместе, а сокрытие тут совсем не обязательно.

Начинаем разбираться, идём в [Википедию](https://en.wikipedia.org/wiki/Encapsulation_(computer_programming)), а она говорит:

> Под инкапсуляцией понимают либо объединение вместе данных и методов, либо скрытие внутренних данных и состояния объекта и ограничение прямого доступа к ним, либо комбинацию этих определений. В общем разные авторы по разному её понимают.

И в качестве примера рассматривающего инкапсуляции исключительно как механизма для объединения данных и методов вместе даётся ссылка на статью [Encapsulation is not information hiding](https://www.javaworld.com/article/2075271/encapsulation-is-not-information-hiding.html) - а [Information Hiding](https://en.wikipedia.org/wiki/Information_hiding) - это по сути и есть сокрытие деталей реализации, так что явный аргумент пока не в мою пользу.

Но я то всегда воспринимал инкапсуляцию исключительно в контексте сокрытия деталей реализации, а у статьи никаких рефференсов на материалы, которые она использовала нет, так что предлагаю посмотреть ещё источники.

Берём книгу "Чистая Архитектура" Роберта Мартина, смотрим что там:

> Это возможность очертить круг связанных данных и функций. За пределами круга эти данные невидимы и доступны только некоторые функции.
>
>(Глава 5 Объектно-ориентированное программирвоание, 55 стр.)

Берём книгу "Объектно ориентированный анализ и проектирование с примерами приложений Третье издание" Гради Буч:

> Абстракция и инкапсуляция дополняют друг друга. В центре внимания абстракции находится наблюдаемое поведение объекта, а инкапсуляция сосредоточена на реализации, обеспечивающей заданное поведение. Как правило, инкапсуляция осуществляется с помощью сокрытия информации (а не просто сокрытия данных), т.е. утаивания всех несущественных деталей объекта.
>
>(Глава 2 Объектная модель, 82 стр.)

Открываем "Совершенный код Second edition" Стива Макконелла:

> Абстракция говорит: "Вы можете рассмотреть объект с общей точки зрения". Инкапсуляция добавляет: "Более того, вы не можете рассмотреть объект с иной точки зрения".
>
> Инкапсуляция позволяет вам смотреть на дом, но не даёт подойти достаточно близко, чтобы узнать, из чего сделана дверь. Инкапсуляция позволяет вам знать о существовании двери, о том открыта она или заперта, но при этом вы не можете узнать, из чего она сделана.
>
>(Глава 5 Проектирование при конструировании, 87 стр.)

> Абстракция помогает управлять сложностью, предоставляя модели, позволяющие игнорировать детали реализации. Инкапсуляция не позволяет узнать детали реализации, даже если вы этого захотите.
>
>(Глава 6 Классы, 135 стр.)

Ну и наконец берём "Object oriented software construction Second edition" Бертрана Мейера:

> One of the reasons for the misunderstanding mentioned above is very term "information hiding", which tends to suggest physical protection. "Encapsulation", sometimes used as a synonim for information hiding, is probably preferable in this respect.
>
>(3.2 Five Rules, 53 стр.)

Это он про то что не нужно термин "Information Hiding" понимать буквально как ограничение физического доступа к исходному коду, а только как языковые правила, помогающие ограничивать доступ одних модулей к свойствам других модулей.
